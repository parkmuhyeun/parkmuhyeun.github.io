<!DOCTYPE html>
<html lang="ko"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v9.1.5 <https://hydejack.com/>
--><head><title>디자인 패턴 - 전략 패턴, 템플릿 메서드 패턴, 상태 패턴</title><meta name="description" content="전략 패턴, 템플릿 메서드 패턴, 상태 패턴에 대해 알아보자 "><link rel="canonical" href="https://parkmuhyeun.github.io/etc/design%20pattern/2023-02-22-design-pattern(1)/"><meta name="keywords" content="spring,springboot,java,jpa"><meta name="theme-color" content="rgb(8,46,57)"><link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <script src="/assets/tipuesearch/tipuesearch_content.js"></script> <script src="/assets/tipuesearch/tipuesearch_set.js"></script> <script src="/assets/tipuesearch/tipuesearch.min.js"></script><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="애송이 개발 블로그"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="application-name" content="애송이 개발 블로그"><meta name="generator" content="Hydejack v9.1.5" /><link rel="alternate" href="https://parkmuhyeun.github.io/etc/design%20pattern/2023-02-22-design-pattern(1)/" hreflang="ko-kr, en-us"><link type="application/atom+xml" rel="alternate" href="https://parkmuhyeun.github.io/feed.xml" title="애송이 개발 블로그" /><link rel="shortcut icon" href="/assets/icons/favicon.ico"><link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png"><link rel="manifest" href="/assets/site.webmanifest"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG"> <script>!function(r,c){"use strict";function a(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=c.createElement("script");n.src=e,t&&a(n,"load",t,{once:!0});t=c.scripts[0];return t.parentNode.insertBefore(n,t),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=c.createElement("script");function o(){r._loaded=!0,t&&a(n,"load",t,{once:!0});var e=c.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():a(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){a(c.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); !function(w) { w._baseURL = '/'; w._publicPath = '/assets/js/'; w._noPushState = false; w._noDrawer = false; w._noNavbar = false; w._noToc = false; w._noSearch = false; w._search = { DATA_URL: '/assets/sitedata.json?no-cache', STORAGE_KEY: 'mini-search/', INDEX_KEY: 'index--2024-02-11T09:18:25+00:00', }; w._clapButton = false; }(window);</script> <script async src="/assets/bower_components/MathJax/es5/tex-mml-chtml.js" id="_MathJax"></script> <!--[if gt IE 8]><!----><style id="_styleInline"> .clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,.content .avatar,.nav-btn,.nav-btn-bar,.navbar,.message,.note-sm,#markdown-toc,.note,.hr-bottom,.hr-after::after,hr,.hr,p,body{transition:none}html{--font-family: Noto Sans,Helvetica,Arial,sans-serif;--font-family-heading: Roboto Slab,Helvetica,Arial,sans-serif;--code-font-family: Fira Code,Menlo,Monaco,Consolas,monospace;--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: #282828;--root-font-size: 15px;--root-font-size-medium: 16px;--root-font-size-large: 17px;--root-font-size-print: 8pt;--root-line-height: 1.75;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 700;--content-width-5: 54rem;--content-margin-5: 4rem;--sidebar-width: 21rem;--half-content: 31rem;--break-point-3: 64em;--break-point-5: 86em;--break-point-dynamic: 1664px}html .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:var(--font-family);font-size:var(--root-font-size);line-height:var(--root-line-height)}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}.content img,.img,.content video,.video{max-width:100%;height:auto}.lead{margin-left:-1rem;margin-right:-1rem;margin-bottom:1.5rem}img.lead,video.lead{display:block;max-width:calc(100% + 2rem);width:calc(100% + 2rem);height:auto}.heading,.f6,h6,.h6,.f5,h5,.h5,.f4,.sidebar-nav-item,h4,.h4,.post-date,.f3,h3,.h3,.f2,h2,.h2,.f1,h1,.h1{font-family:var(--font-family-heading);font-weight:var(--font-weight-heading)}.f1,h1,.h1{font-size:2rem;line-height:1.3}.f2,h2,.h2{font-size:1.5rem;line-height:1.4}.f3,h3,.h3{font-size:1.2em;line-height:1.5}.f4,.sidebar-nav-item,h4,.h4,.post-date{font-size:1.08rem;line-height:1.6}.f5,h5,.h5{font-size:1.04rem;line-height:1.7}.f6,h6,.h6{font-size:1rem}.content h1>a,.content .h1>a{text-decoration:none;border-bottom:none}@media screen and (max-width: 42em){.content h1,.content .h1{font-size:1.7rem;line-height:1.35}}@media screen and (min-width: 86em){.content h1,.content .h1{font-size:2.4rem;line-height:1.25}}@media screen and (min-width: 1664px){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{width:calc(100% + 50vw - 32rem);font-size:3rem;line-height:1.2}}@media screen and (min-width: 124em){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{font-size:4rem;line-height:1.1}}h1,h2,h3,.h1,.h2,.h3{margin:4rem 0 1rem}h4,h5,h6,.h4,.post-date,.h5,.h6{margin:3rem 0 .5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr,.hr{border:0;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-after::after{content:"";display:block;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-bottom{border-bottom:1px solid var(--border-color);padding-bottom:.75rem;margin-bottom:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{position:relative;margin-bottom:1.5rem}@media screen and (min-width: 1664px){body:not(.no-third-column) .page>header>.lead+.note-sm,body:not(.no-third-column) .page>header>.lead+#markdown-toc,body:not(.no-third-column) .page>header>.lead+.note,body:not(.no-third-column) .page>header>a.no-hover+.note-sm,body:not(.no-third-column) .page>header>a.no-hover+#markdown-toc,body:not(.no-third-column) .page>header>a.no-hover+.note{position:absolute;right:-25rem;width:21rem;bottom:0;margin-bottom:0}}.page-title,.post-title{margin-top:0}.post-date{display:flex;justify-content:space-between;margin-top:-.6rem;height:2rem;margin-bottom:.85rem;color:var(--gray)}.post-date>.ellipsis,#breadcrumbs.post-date>ul{cursor:pointer}.post-date [class^="icon-"]{display:inline-block;font-size:smaller;margin-right:.25rem}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message,.note-sm,#markdown-toc,.note{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}.note-sm,#markdown-toc,.note{background:transparent;color:var(--body-color);font-size:smaller;border-left:1px solid var(--border-color);padding:1.2rem 1rem 0 1rem;margin:1rem -1rem;position:relative}.note-sm:before,#markdown-toc:before,.note:before{font-size:0.667rem;font-weight:bold;font-style:normal;letter-spacing:.025rem;text-transform:uppercase;color:var(--menu-text);position:absolute;top:0}.note-sm[title]:before,#markdown-toc[title]:before,.note[title]:before{content:attr(title) !important}.note{font-size:1rem}@media screen{body::before{content:'';width:.5rem;background:var(--gray-bg);position:fixed;left:0;top:0;bottom:0}}@media (min-width: 64em){body::before{width:21rem}}@media (min-width: 1664px){body::before{width:calc(50% - 31rem)}}@media screen and (min-width: 42em){html{font-size:var(--root-font-size-medium)}}@media screen and (min-width: 124em){html{font-size:var(--root-font-size-large)}}#breadcrumbs>ul{height:1rem;margin:-1.5rem 0 .5rem;padding:0;font-size:.667rem;color:var(--menu-text);text-transform:uppercase;width:100%;list-style:none}#breadcrumbs>ul>li{display:inline}#breadcrumbs>ul>li a{color:var(--gray);text-decoration:none;border-bottom:none}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt1{margin-top:1rem}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.ml1{margin-left:1rem}.mr1{margin-right:1rem}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sixteen-ten{position:relative}.sixteen-ten::before{display:block;content:"";width:100%;padding-top:62.5%}.sixteen-ten>*{position:absolute;top:0;left:0;right:0;bottom:0}.four-three{position:relative}.four-three::before{display:block;content:"";width:100%;padding-top:75%}.four-three>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.larger{font-size:larger}.smaller{font-size:smaller}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.ellipsis,#breadcrumbs>ul{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.border{border:1px solid var(--border-color)}@media (min-width: 42em){.border-radius,.lead,.page .aspect-ratio.sixteen-nine.lead{border-radius:.5rem}}.fallback-img{background-position:center;background-repeat:no-repeat;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiB2aWV3Qm94PSIwIDAgMTYwIDkwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDQ4ODI4LCAwLCAwLCAwLjA0Nzk5MSwgNTQuOTk5OTczLCAyMC40MjgxNDgpIj4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTk1OS44ODQgMTI4YzAuMDQwIDAuMDM0IDAuMDgyIDAuMDc2IDAuMTE2IDAuMTE2djc2Ny43N2MtMC4wMzQgMC4wNDAtMC4wNzYgMC4wODItMC4xMTYgMC4xMTZoLTg5NS43N2MtMC4wNDAtMC4wMzQtMC4wODItMC4wNzYtMC4xMTQtMC4xMTZ2LTc2Ny43NzJjMC4wMzQtMC4wNDAgMC4wNzYtMC4wODIgMC4xMTQtMC4xMTRoODk1Ljc3ek05NjAgNjRoLTg5NmMtMzUuMiAwLTY0IDI4LjgtNjQgNjR2NzY4YzAgMzUuMiAyOC44IDY0IDY0IDY0aDg5NmMzNS4yIDAgNjQtMjguOCA2NC02NHYtNzY4YzAtMzUuMi0yOC44LTY0LTY0LTY0djB6Ii8+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDpyZ2JhKDEyOCwxMjgsMTI4LC4zMykiIGQ9Ik04MzIgMjg4YzAgNTMuMDIwLTQyLjk4IDk2LTk2IDk2cy05Ni00Mi45OC05Ni05NiA0Mi45OC05NiA5Ni05NiA5NiA0Mi45OCA5NiA5NnoiLz4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTg5NiA4MzJoLTc2OHYtMTI4bDIyNC0zODQgMjU2IDMyMGg2NGwyMjQtMTkyeiIvPgogIDwvZz4KPC9zdmc+")}hy-push-state a{color:var(--body-color)}@supports not ((text-decoration-thickness: initial) and (text-underline-offset: initial)){hy-push-state a{text-decoration:none;border-bottom:2px solid}}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){hy-push-state a{text-decoration-style:solid;text-underline-offset:.35rem;text-decoration-thickness:2px}}hy-push-state a.no-hover{border-bottom:none;text-decoration-thickness:unset;text-underline-offset:unset}.content a:not(.btn):not(.no-hover){border-color:var(--accent-color-faded)}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){.content a:not(.btn):not(.no-hover){text-decoration-color:var(--accent-color-faded)}}.content .aspect-ratio{overflow:hidden}.content .aspect-ratio img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden;display:block;z-index:4}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 1664px){hy-drawer{width:calc(50% - 31rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:rgba(255,255,255,0.75);text-align:center;min-height:100vh}.sidebar.invert{color:rgba(32,32,32,0.75)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2);text-decoration-color:rgba(255,255,255,0.2)}.sidebar.invert a{color:#222;border-bottom-color:rgba(32,32,32,0.2);text-decoration-color:rgba(32,32,32,0.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center / cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 50%, rgba(32,32,32,0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>a.sidebar-title{text-decoration:none}.sidebar-about>a.sidebar-title>h2{margin:0;padding-bottom:.5rem}.sidebar-about>a.sidebar-title::after{content:'';display:block;border-bottom:2px solid;margin:0 auto .5rem;width:4rem;border-color:rgba(255,255,255,0.2);transition:border-color 250ms}.sidebar-about>a.sidebar-title:hover::after{border-color:#fff;transition:border-color 50ms}.sidebar.invert .sidebar-about>a.sidebar-title::after{border-color:rgba(32,32,32,0.2)}.sidebar.invert .sidebar-about>a.sidebar-title:hover::after{border-color:#222}.sidebar-nav>ul{list-style:none;padding-left:0}.sidebar-nav-item{display:inline-block;margin-bottom:.5rem}@media (min-width: 64em){#_main.no-drawer #_menu{display:none}#_main.no-drawer .nav-btn-bar>:nth-child(2){border:none}}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem;text-decoration:none;border-bottom-width:2px;border-bottom-style:solid}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-bottom,.fixed-top{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{position:relative;padding-top:0;padding-bottom:0;min-height:0;max-height:5rem}.nav-btn-bar{margin:0 -1rem;background-color:white;background-color:var(--body-bg);height:5rem;display:flex;align-items:center;position:relative}.nav-btn-bar>:first-child,.nav-btn-bar>:last-child{border:none}.nav-btn{background:none;border:none;text-decoration:none;display:flex;align-items:center;justify-content:center;width:3.25rem;height:5rem;color:var(--menu-text);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color);margin-left:-1px}#markdown-toc{margin:2rem -1rem 2rem calc(-1rem + 1px);padding-left:2.5rem;padding-bottom:.5rem}#markdown-toc:before{left:1rem}@media screen and (min-width: 1664px){body:not(.no-toc) #markdown-toc{position:absolute;z-index:4;width:20.5rem;right:0;margin:auto;overflow:auto}}@media screen and (min-width: 1664px){body.no-break-layout:not(.no-toc) #markdown-toc{width:calc(50% - 31rem)}}.content{margin-left:auto;margin-right:auto;padding:8rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;min-height:100vh}}@media screen and (min-width: 42em){.content{max-width:42rem}}@media screen and (min-width: 54em){.content{max-width:48rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 86em){.content{padding-top:9rem;margin-left:25rem;margin-right:4rem;max-width:54rem}}@media screen and (min-width: 1664px){.content{margin:auto}}.large-only{display:none}@media screen and (min-width: 1664px){.large-only{display:block}}.avatar{width:7rem;height:7rem;border-radius:100%;overflow:hidden;display:inline-block}.avatar img{width:100%}.content .avatar{float:right;box-sizing:content-box;border:1rem solid var(--body-bg);transition:border-color 1s ease;margin-top:-1.5rem;margin-right:-1rem}.note:before{content:"Note"}.page>header>.note-sm:before,.page>header>.note:before,.page>header>#markdown-toc:before{content:"Description"}#markdown-toc:before{content:"Table of Contents"}.layout-resume .note-sm:before,.layout-resume .note:before,.layout-resume #markdown-toc:before{content:"Summary"}</style><link rel="preload" as="style" href="/assets/css/hydejack-9.1.5.css" id="_stylePreload"><link rel="preload" as="style" href="/assets/icomoon/style.css" id="_iconsPreload"><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap" id="_fontsPreload"> <script> setRel('_stylePreload'); setRel('_iconsPreload'); /**/setRel('_fontsPreload');/**/ </script> <noscript><link rel="stylesheet" href="/assets/css/hydejack-9.1.5.css"><link rel="stylesheet" href="/assets/icomoon/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap"> </noscript><style id="_pageStyle"> html{--accent-color: rgb(79,177,186);--accent-color-faded: rgba(79,177,186,0.5);--accent-color-highlight: rgba(79,177,186,0.1);--accent-color-darkened: #409ba3;--theme-color: rgb(8,46,57)}</style><!--<![endif]--><body class="no-break-layout"> <hy-push-state id="_pushState" replace-selector="#_main" link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)" script-selector="script" duration="500" hashchange ><div id="_navbar" class="navbar fixed-top"><div class="content"> <span class="sr-only">Jump to:</span><div class="nav-btn-bar"> <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a> <!--상단메뉴 카테고리들 --><div class="top-menu"> <a id="_drawer--opened" href="/about/" class="nav-btn top-menu " > About </a> <a href="/study/" class="nav-btn top-menu " > Study </a> <a href="/etc/" class="nav-btn top-menu " > Etc </a> <a href="/woowacourse/" class="nav-btn top-menu " > 우테코 5기 </a></div><div class="nav-span"> <form action="/search"><div class="tipue_search_left"> <img src="/assets/tipuesearch/search.png" class="tipue_search_icon"></div><div class="tipue_search_right"> <input type="text" name="q" id="tipue_search_input" placeholderpattern=".{1,}" title="At least 1 characters" required></div><div style="clear: both;"></div></form></div></div></div></div><hr class="sr-only" hidden /><main id="_main" class="content layout-post" role="main" ><nav id="breadcrumbs" class="screen-only"><ul><li><a href="/">home</a><li> <span>/</span> <a href="/etc/">etc</a><li> <span>/</span> <a href="/etc/design%20pattern/">design pattern</a><li> <span>/</span> <span>2023-02-22-design-pattern(1)</span></ul></nav><article id="post-etc-design%20pattern-design-pattern(1)" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> 디자인 패턴 - 전략 패턴, 템플릿 메서드 패턴, 상태 패턴</h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2023-02-22T00:00:00+00:00">22 Feb 2023</time> in <a href="/etc/" class="flip-title">etc</a> / <a href="/design-pattern/" class="flip-title">Design pattern</a> on <span>Design-pattern</span>, <span>Strategy</span>, <span>Template-method</span>, <span>State</span> </span></div><p class="note-sm" > 전략 패턴, 템플릿 메서드 패턴, 상태 패턴에 대해 알아보자</header><h2 id="디자인-패턴에-대해-관심을-가진-이유">디자인 패턴에 대해 관심을 가진 이유</h2><p><img src="/assets//img/blog/etc/design%20pattern/dp(1)_1.jpg" alt="" /><p>프리코스부터 시작해서 현재 우테코 미션을 진행하다 보니 어느 순간 계속해서 같은 형태의 코드만 양산하고 있는 듯한 느낌이 들었다. 기능을 정의하고 mvc 패턴에 따라 클린 코드, 객체지향 법칙을 적용하며 코드를 작성한다.. 라 매번 이렇게 같은 방식에 약간 재미도 없어지고 뭔가 어떻게 하면 더 성장할 수 있을까 고민에 빠지게 되었다.<p>매일 같은 메뉴만 먹는다고 생각해보자.. 삶이 재미가 있을까? 물론 저걸 완벽하게 다 할 수 있다는 건 아니다ㅋㅋㅋ 하지만 가끔은 다른 반찬도 먹고 싶은 법.. 그래서 어떤 게 좋을까 생각하다 책을 보며 이론을 채우기로 했다. 그중 디자인 패턴에 대해 공부해 보기로 했고 가능하면 적용해 보려고 한다.<p>자동차 경주 미션 때 전략 패턴을 적용해 봤는데 굉장히 인상 깊었던 기억이 있어서 그런가.. 디자인 패턴에 관심이 갔다! 근데 담당 코치님인 구구가 디자인 패턴을 싫어한다고 들었던 거 같은데.. 왜 그런지 조만간 물어봐야겠다.<h2 id="디자인-패턴이란">디자인 패턴이란?</h2><p>디자인 패턴에 대해 처음으로 시작하는 글이니 만큼 간단하게 디자인 패턴의 정의에 대해 알아보고 패턴으로 넘어가자. 객체지향 설계를 하다 보면, 이전과 비슷한 상황에서 사용했던 설계를 재사용하는 경우가 종종 발생한다. 이런 설계는 특정 상황에 맞는 해결책을 빠르게 찾을 수 있도록 도와주는데, 이렇게 반복적으로 사용되는 설계는 일정 패턴을 가지며 이를 디자인 패턴이라 한다. 이런 패턴을 잘 습득하면 상황에 맞는 올바른 설계를 더 빠르게 적용할 수도 있고, 각 패턴의 장단점을 통해 설계를 선택하는 데 도움을 얻을 수도 있다.<h2 id="전략strategy-패턴">전략(Strategy) 패턴</h2><p>전략 패턴은 객체가 할 수 있는 행위 각각에 대해 전략 클래스를 생성하고 이를 정의하는 공통의 인터페이스를 정의해 행위를 동적으로 바꾸고 싶은 경우 직접 행위를 수정하지 않고 전략을 바꿔끼어주어 행위를 유연하게 확장할 수 있는 방법이다. 우리는 말보다 코드가 더 친숙하니 코드로 한번 봐보자!<p>다음과 같은 할인 정책을 적용하고 있는 매장이 있다고 해보자<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Calculator</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">calculate</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">firstGuest</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Item</span> <span class="n">item</span> <span class="o">:</span> <span class="n">items</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">firstGuest</span><span class="o">){</span>
        <span class="n">sum</span> <span class="o">+=</span>  <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">*</span> <span class="mf">0.9</span><span class="o">);</span> <span class="c1">// 첫 손님 10% 할인</span>
      <span class="o">}</span><span class="k">else</span> <span class="k">if</span> <span class="o">(!</span><span class="n">item</span><span class="o">.</span><span class="na">isFresh</span><span class="o">()){</span>
        <span class="n">sum</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getPrice</span><span class="o">()</span> <span class="o">*</span> <span class="mf">0.8</span><span class="o">);</span> <span class="c1">//덜 신선한 경우 20% 할인</span>
      <span class="o">}</span><span class="k">else</span><span class="o">{</span>
        <span class="n">sum</span> <span class="o">+=</span> <span class="n">item</span><span class="o">.</span><span class="na">getPrice</span><span class="o">();</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>위와 같은 코드의 경우 다음과 같은 문제점이 있다.<ul><li>모든 할인 정책들이 하나의 코드에 있어, 정책이 추가될 때마다 코드 분석이 힘들어진다.<li>가격 정책이 추가될 때마다 if 블록이 추가되기 때문에 유지 보수가 더 힘들어진다.</ul><p>그럼 어떻게 하면 좋을까?? 이때 전략 패턴을 적용해 볼 수 있다. 각각의 가격 할인 정책을 전략으로 두고 별도 객체로 분리하는 것이다. 아래와 같이 분리하면 Calculator라는 콘텍스트에서는 전략을 직접 선택하지 않고 클라이언트에서 DI(의존 주입)를 이용해 전략을 전달해 줄 수 있다.<p><img src="/assets//img/blog/etc/design%20pattern/dp(1)_2.png" alt="" /><p>그러면 다음과 같이 코드를 작성할 수 있을 것이다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Calculator</span> <span class="o">{</span>
  
  <span class="kd">private</span> <span class="nc">DiscountStrategy</span> <span class="n">discountStrategy</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Calculatr</span><span class="o">(</span><span class="nc">DiscountStrategy</span> <span class="n">discountStrategy</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">discountStrategy</span> <span class="o">=</span> <span class="n">discountStrategy</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">calculate</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="nc">Item</span> <span class="n">item</span> <span class="o">:</span> <span class="n">items</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">sum</span> <span class="o">+=</span> <span class="n">discountStrategy</span><span class="o">.</span><span class="na">getDiscountPrice</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>이렇게 되면 이제 새로운 할인 정책이 추가되더라도 Calculator 클래스의 코드는 변경되지 않고 단지 새로운 전략 클래스만 추가 되어 바꿔 끼어질 수 있다. 즉, 개방 폐쇄 원칙인 OCP를 만족하게 된 것이다!<blockquote><p>객체지향 프로그래밍 5가지 원칙인 SOLID에 대해 자세히 알아보고 싶으면 다음 링크를 참고해보자<ul><li><a href="https://parkmuhyeun.github.io/etc/java/2022-12-25-OOP-Ex(1)/">예를 들어가며 SOLID에 대해 알아보자(1)</a><li><a href="https://parkmuhyeun.github.io/etc/java/2022-12-29-OOP-Ex(2)/">예를 들어가며 SOLID에 대해 알아보자(2)</a></ul></blockquote><h2 id="템플릿-메서드template-method-패턴">템플릿 메서드(Template Method) 패턴</h2><p>프로그램을 구현하다 보면 완전히 동일한 절차를 가진 코드를 작성하게 될 때가 있다. 예를 들어 다음과 같이 사용자 정보를 가져오는 부분의 구현만 다를 뿐 인증을 처리하는 과정은 완전히 동일할 수 있다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DbAuthenticator</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nc">Auth</span> <span class="nf">authenticate</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">pw</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//사용자 정보로 인증 확인</span>
    <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userDao</span><span class="o">.</span><span class="na">seletById</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="kt">boolean</span> <span class="n">auth</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="na">equalPassword</span><span class="o">(</span><span class="n">pw</span><span class="o">);</span>
    <span class="c1">//인증 실패시 익셉션 발생</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">auth</span><span class="o">){</span>
      <span class="k">throw</span> <span class="nf">createException</span><span class="o">()</span>
    <span class="o">}</span>
    <span class="c1">//인증 성공시, 인증 정보 제공</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Auth</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="nc">AuthException</span> <span class="nf">createException</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthException</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LdapAuthenticator</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nc">Auth</span> <span class="nf">authenticate</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">pw</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//사용자 정보로 인증 확인</span>
    <span class="kt">boolean</span> <span class="n">lauth</span> <span class="o">=</span> <span class="nc">IdapClient</span><span class="o">.</span><span class="na">authenticate</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="n">pw</span><span class="o">);</span>
    <span class="c1">//인증 실패시 익셉션 발생</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">auth</span><span class="o">){</span>
      <span class="k">throw</span> <span class="nf">createException</span><span class="o">()</span>
    <span class="o">}</span>
    <span class="c1">//인증 성공시, 인증 정보 제공</span>
    <span class="nc">LdapContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="nc">IdapClient</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Auth</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"name"</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">private</span> <span class="nc">AuthException</span> <span class="nf">createException</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nf">AuthException</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div><p>DB나 LDAP가 아닌 다른 인증 서버를 두더라도 위의 과정을 유사하게 거칠 것이다. 이렇게 실행 과정/단계는 동일한테 각 단계 중 일부의 구현이 다른 경우 사용할 수 있는 패턴이 템플릿 메서드 패턴이다. 템플릿 메서드 패턴은 다음과 같이 두 가지로 구성될 수 있다.<ul><li>실행 과정을 구현한 상위 클래스<li>실행 과정의 일부 단계를 구현한 하위 클래스</ul><p>상위 클래스는 실행 과정을 구현한 메서드를 제공하고 이 메서드는 구현하는데 필요한 각 단계를 정의하며 이 중 일부 단계는 추상 메서드를 호출하는 방식으로 구현된다. 예를 들어 다음과 같이 작성될 수 있다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="nc">Authenticator</span> <span class="o">{</span>
  <span class="c1">//템플릿 메서드</span>
  <span class="kd">public</span> <span class="nc">Auth</span> <span class="nf">authenticate</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">pw</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">doAuthenticate</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="n">pw</span><span class="o">))</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="nf">createException</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="nf">createAuth</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">protected</span> <span class="kd">abstract</span> <span class="kt">boolean</span> <span class="nf">doAuthenticate</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">pw</span><span class="o">);</span>

  <span class="kd">private</span> <span class="nc">RuntimeException</span> <span class="nf">createException</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">AuthException</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">protected</span> <span class="kd">abstract</span> <span class="nc">Auth</span> <span class="nf">createAuth</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div><p>두 클래스에서 차이가 나는 부분인 인증 여부 확인(doAuthenticate), 객체 생성 단계(createAuth)는 추상 메서드로 분리하였다. authenticate() 메서드는 모든 하위 타입에 동일하게 적용되는 실행 과정을 제공하기 때문에, 이 메서드를 템플릿 메서드라 한다.<p>위처럼 Authenticator 클래스를 생성한 후 이제 하위 클래스에서 상속받아 추상 메서드 부분만 알맞게 재정의 해주면 된다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LdapAuthenticator</span> <span class="kd">extends</span> <span class="nc">Authenticator</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">doAuthenticate</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">pw</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">IdapClient</span><span class="o">.</span><span class="na">authenticate</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="n">pw</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="nc">Auth</span> <span class="nf">createAuth</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">LdapContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="nc">IdapClient</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Auth</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"name"</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>이제 새로운 인증 서버가 추가되더라도 다른 부분만 추가적으로 구현해 주면 되니 중복 코드를 제거할 수 있다. 이렇게 템플릿 메서드 패턴을 사용함으로 써 코드 중복 문제를 제거하면서 동시에 코드를 재사용할 수 있게 되었다!<h2 id="상태state-패턴">상태(State) 패턴</h2><p>상태에 따라 다르게 동작하는 자판기를 구현한다고 생각해 보자<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VendingMachine</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">enum</span> <span class="nc">State</span> <span class="o">{</span> <span class="no">NOCOIN</span><span class="o">,</span> <span class="no">SELECTABLE</span> <span class="o">}</span>

  <span class="kd">private</span> <span class="nc">State</span> <span class="n">state</span> <span class="o">=</span> <span class="nc">State</span><span class="o">.</span><span class="na">NOCOIN</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertCoin</span><span class="o">(</span><span class="kt">int</span> <span class="n">coin</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">switch</span><span class="o">(</span><span class="n">state</span><span class="o">)</span> <span class="o">{</span> 
      <span class="k">case</span> <span class="nl">NOCOIN:</span>
        <span class="n">increaseCoin</span><span class="o">(</span><span class="n">coin</span><span class="o">);</span>
        <span class="n">state</span> <span class="o">=</span> <span class="nc">State</span><span class="o">.</span><span class="na">SELECTABLE</span><span class="o">;</span>
        <span class="k">break</span><span class="o">;</span>
      <span class="k">case</span> <span class="nl">SELECTABLE:</span>
        <span class="n">increaseCoin</span><span class="o">(</span><span class="n">coin</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">select</span><span class="o">(</span><span class="kt">int</span> <span class="n">productId</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">switch</span><span class="o">(</span><span class="n">state</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">case</span> <span class="nl">NOCOIN:</span>
        <span class="c1">//아무 행동 X</span>
        <span class="k">break</span><span class="o">;</span>
      <span class="k">case</span> <span class="nl">SELECTABLE:</span>
        <span class="n">provideProduct</span><span class="o">(</span><span class="n">productId</span><span class="o">);</span>
        <span class="n">decreaseCoin</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">hasNocoin</span><span class="o">()){</span>
          <span class="n">state</span> <span class="o">=</span> <span class="nc">State</span><span class="o">.</span><span class="na">NOCOIN</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  
  <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div><p>위와 같은 경우 새로운 상태가 추가될 때 마다 insertCoin() 메서드와 select() 메서드에 조건문이 추가된다. 그렇게 되면 후에 유지 보수가 매우 어렵게 될 것이다.(매번 조건문을 어렵게 찾고 수정해야 함)<p>그러면 어떻게 해야 될까..? 위의 코드를 보면 각 상태에 따라 다르게 기능들이 동작하는 걸 볼 수 있다. 이렇게 기능이 상태에 따라 다르게 동작해야 할 때 사용할 수 있는 패턴이 상태 패턴이다. 상태 패턴에서는 아래와 같이 상태를 별도로 분리하고 각 상태별로 맞는 하위 타입을 구현한다.<p><img src="/assets//img/blog/etc/design%20pattern/dp(1)_3.png" alt="" /><blockquote><p>근데 이렇게 보다 보니깐 전략 패턴과 상태 패턴이 서로 헷갈렸다. 둘이 공통의 인터페이스로 분리한 후 각각의 상황에 맞게 기능을 구현하는 거까지 비슷하다 보니.. 전략 패턴은 한 번 인스턴스를 생성하고 나면, 상태가 거의 바뀌지 않는 경우에 사용하고 상태 패턴은 한 번 인스턴스를 생성하고 난 뒤, 상태를 바꾸는 경우가 잦은 경우에 사용할 수 있다!</blockquote><p>분리하고 나면 이제 VendingMachine 코드는 아래와 같이 되고<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VendingMachine</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">State</span> <span class="n">state</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">VendingMachine</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">state</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NoCoinState</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertCoin</span><span class="o">(</span><span class="kt">int</span> <span class="n">coin</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">state</span><span class="o">.</span><span class="na">increaseCoin</span><span class="o">(</span><span class="n">coin</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span> <span class="c1">// 상태 객체에 위임</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">select</span><span class="o">(</span><span class="kt">int</span> <span class="n">productId</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">state</span><span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">productId</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span> <span class="c1">// 상태 객체에 위임</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeState</span><span class="o">(</span><span class="nc">State</span> <span class="n">newState</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div><p>각각의 상태를 구현한 클래스들은 아래와 같이 된다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NoCoinState</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">increaseCoin</span><span class="o">(</span><span class="kt">int</span> <span class="n">coin</span><span class="o">,</span> <span class="nc">VendingMachine</span> <span class="n">vm</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">vm</span><span class="o">.</span><span class="na">increaseCoin</span><span class="o">(</span><span class="n">coin</span><span class="o">);</span>
    <span class="n">vm</span><span class="o">.</span><span class="na">changeState</span><span class="o">(</span><span class="k">new</span> <span class="nc">SelectableState</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">select</span><span class="o">(</span><span class="kt">int</span> <span class="n">productId</span><span class="o">,</span> <span class="nc">VendingMachine</span> <span class="n">vm</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">SoundUtil</span><span class="o">.</span><span class="na">beep</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SelectableState</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">increaseCoin</span><span class="o">(</span><span class="kt">int</span> <span class="n">coin</span><span class="o">,</span> <span class="nc">VendingMachine</span> <span class="n">vm</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">vm</span><span class="o">.</span><span class="na">increaseCoin</span><span class="o">(</span><span class="n">coin</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">select</span><span class="o">(</span><span class="kt">int</span> <span class="n">productId</span><span class="o">,</span> <span class="nc">VendingMachine</span> <span class="n">vm</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">vm</span><span class="o">.</span><span class="na">provideProduct</span><span class="o">(</span><span class="n">productId</span><span class="o">);</span>
    <span class="n">vm</span><span class="o">.</span><span class="na">decreaseCoin</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">vm</span><span class="o">.</span><span class="na">hasNoCoin</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">vm</span><span class="o">.</span><span class="na">changeState</span><span class="o">(</span><span class="k">new</span> <span class="nc">NoCoinState</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>이렇게 상태 패턴을 적용하게 되면 새로운 상태가 추가되더라도 콘텍스트 코드(Vending Machine)가 받는 영향은 최소화되어 유지 보수에 유리하다. 새로운 상태가 추가되더라도 insertCoin() 메서드와 select() 메서드 코드는 그대로 유지되고 구현 코드가 각 상태 별로 구분되기 때문에 상태 별 동작을 수정하기 쉽다.<h3 id="상태-변경은-누가하는게-좋을까">상태 변경은 누가하는게 좋을까?</h3><p>그런데 여기서 한 가지 더 고민해 볼 게 있다. 상태 변경을 누가 하느냐에 관한 것이다. 콘텍스트(VendingMachine)가 될 수도 있고 위에서 한 것처럼 상태 객체가 할 수도 있다. 콘텍스트에서 상태를 변경할 경우 코드는 아래처럼 된다. 콘텍스트에서 변경할 경우 콘텍스트 코드가 약간 복잡해질 수 있다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VendingMachine</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">State</span> <span class="n">state</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">VendingMachine</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">state</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NoCoinState</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">insertCoin</span><span class="o">(</span><span class="kt">int</span> <span class="n">coin</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">state</span><span class="o">.</span><span class="na">increaseCoin</span><span class="o">(</span><span class="n">coin</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">hasCoin</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">changeState</span><span class="o">(</span><span class="k">new</span> <span class="nc">SelectableState</span><span class="o">());</span> <span class="c1">//콘텍스트에서 상태 변경</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">select</span><span class="o">(</span><span class="kt">int</span> <span class="n">productId</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">state</span><span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">productId</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">isSelectable</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">hasNoCoin</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">changeState</span><span class="o">(</span><span class="k">new</span> <span class="nc">NoCoinState</span><span class="o">());</span> <span class="c1">//콘텍스트에서 상태 변경</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">changeState</span><span class="o">(</span><span class="nc">State</span> <span class="n">newState</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">state</span> <span class="o">=</span> <span class="n">newState</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">hasCoin</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">...</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">hasNoCoin</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="n">hasCoin</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="o">...</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SelectableState</span> <span class="kd">implements</span> <span class="nc">State</span> <span class="o">{</span>

  <span class="c1">// 콘텍스트가 상태를 변경하므로, 상태 객체는 자신이 할 작업만 처리</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">select</span><span class="o">(</span><span class="kt">int</span> <span class="n">productId</span><span class="o">,</span> <span class="nc">VendingMachine</span> <span class="n">vm</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">vm</span><span class="o">.</span><span class="na">provideProduct</span><span class="o">(</span><span class="n">productId</span><span class="o">);</span>
    <span class="n">vm</span><span class="o">.</span><span class="na">decreaseCoin</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>그럼 어떤 방식이 더 좋을까..? 상태 변경을 누가 할지는 주어진 상황에 맞게 선택해야 된다. 위와 같이 콘텍스트에서 상태를 변경하는 방식은 상태 개수가 적고 상태 변경 규칙이 거의 바뀌지 않는 경우에 유리하다. 왜냐하면 상태 종류가 지속적으로 변경되거나 상태 변경 규칙이 자주 바뀌면 그만큼 콘텍스트 상태 변경 처리 코드가 복잡해질 가능성이 높기 때문에 유연성이 떨어질 수 있다.<p>반면에 상태 객체에서 상태를 변경하는 경우, 콘텍스트에 영향을 주지 않으면서 상태를 추가하거나 상태 변경 규칙을 바꿀 수 있게 된다. 하지만, 상태 변경 규칙이 여러 클래스에 분산되어 있기 때문에, 클래스가 많아질수록 상태 변경 규칙을 파악하기 어려울 수 있다. 또한, 한 상태 클래스에서 다른 상태 클래스에 대한 의존도 발생하게 된다.<hr /><p>참고: <a href="https://search.naver.com/search.naver?where=nexearch&amp;sm=top_hty&amp;fbm=0&amp;ie=utf8&amp;query=%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80+%EB%B0%98%EB%93%9C%EC%8B%9C+%EC%A0%95%EB%B3%B5%ED%95%B4%EC%95%BC+%ED%95%A0+%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5%EA%B3%BC+%EB%94%94%EC%9E%90%EC%9D%B8+%ED%8C%A8%ED%84%B4">개발자가 반드시 정복해야 할 객체지향과 디자인 패턴</a><p>*틀린 부분이 있으면 언제든지 말씀해 주시면 공부해서 수정하겠습니다.</article><hr class="dingbat related mb6" /> <script async src="https://www.googletagmanager.com/gtag/js?id=G-T765T1JLEW"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-T765T1JLEW'); </script><aside class="about related mt4 mb4" role="complementary"><div class="author mt4"><h2 class="page-title hr-bottom"> About</h2><p>반갑습니다. 백엔드 개발자 박무현입니다.<div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/parkmuhyeun" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:pjhg410@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://parkmuhyeun.github.io/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></aside><aside class="related mb4" role="complementary"><h2 class="hr-bottom">Related Posts</h2><ul class="related-posts"><li class="h4"> <a href="/study/it%20infra/2024-02-11-docker/" class="flip-title"><span>도커를 응용하기 위한 작동 원리 및 베이스들</span></a> <time class="faded fine" datetime="2024-02-11T00:00:00+00:00">11 Feb 2024</time><li class="h4"> <a href="/etc/seminar/2023-12-28-observability/" class="flip-title"><span>수백 개의 분산 서비스에서 Observability 시스템 구축하기</span></a> <time class="faded fine" datetime="2023-12-28T00:00:00+00:00">28 Dec 2023</time><li class="h4"> <a href="/etc/java/2023-12-16-Domain/" class="flip-title"><span>도메인 완전성과 순수성(+도메인 모델과 영속 모델 분리)</span></a> <time class="faded fine" datetime="2023-12-16T00:00:00+00:00">16 Dec 2023</time></ul></aside><aside class="comments related" role="complementary"><h2>Comments</h2><script src="https://utteranc.es/client.js" repo="parkmuhyeun/blog-comments-repo" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></aside><footer class="content" role="contentinfo"><hr/><p><small class="copyright">© 2022. All rights reserved. </small><p><small>Powered by 애송이</small><hr class="sr-only"/></footer></main><hy-drawer id="_drawer" class="" side="left" threshold="10" noscroll ><header id="_sidebar" class="sidebar" role="banner"><div class="sidebar-bg sidebar-overlay" style="background-color:rgb(8,46,57);background-image:url(/assets/img/sidebar-bg.jpg)"></div><div class="sidebar-sticky"><div class="sidebar-about"><div class="sidebar-title" style="margin-bottom: 45px;"> <a class="sidebar-title" href="/"><h2 class="h1">애송이 개발 블로그</h2></a></div><a class="no-hover" href="/" tabindex="-1"> <img src="/assets/img/logo.jpg" class="avatar" alt="애송이 개발 블로그" width="120" height="120" loading="lazy" /> </a><p class=""> 끊임없이 생각하고 나아가는 개발자</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li> <a id="_drawer--opened" href="/about/" class="sidebar-nav-item " > About </a><li> <a href="/study/" class="sidebar-nav-item " > Study </a><li> <a href="/etc/" class="sidebar-nav-item " > Etc </a><li> <a href="/woowacourse/" class="sidebar-nav-item " > 우테코 5기 </a></ul></nav><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/parkmuhyeun" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:pjhg410@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://parkmuhyeun.github.io/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></header></hy-drawer><hr class="sr-only" hidden /> </hy-push-state> <!--[if gt IE 10]><!----> <script nomodule>!function(){var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())}(); </script> <script src="/assets/js/hydejack-9.1.5.js" type="module"></script> <script src="/assets/js/LEGACY-hydejack-9.1.5.js" nomodule defer></script> <script>!function(w, d) { w.ga=w.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; /**/ ga('create', 'G-T765T1JLEW', 'auto'); /**/ var pushStateEl = d.getElementById('_pushState'); var timeoutId; pushStateEl.addEventListener('hy-push-state-load', function() { w.clearTimeout(timeoutId); timeoutId = w.setTimeout(function() { ga('set', 'page', w.location.pathname); ga('send', 'pageview'); }, 500); }); d.addEventListener('hy--cookies-ok', function () { w.ga(function(tracker) { w.ga("set", "anonymizeIp", undefined); localStorage && localStorage.setItem("ga--client-id", tracker.get("clientId")); }); }); w.loadJSDeferred('https://www.google-analytics.com/analytics.js'); }(window, document);</script> <!--<![endif]--><div hidden><h2 class="sr-only">Templates (for web app):</h2><clap-config> <clap-text at="1">Keep going!</clap-text> <clap-text at="2">Keep going ×2!</clap-text> <clap-text at="3">Give me more!</clap-text> <clap-text at="5">Thank you, thank you</clap-text> <clap-text at="7">Far too kind!</clap-text> <clap-text at="10">Never gonna give me up?</clap-text> <clap-text at="14">Never gonna let me down?</clap-text> <clap-text at="20">Turn around and desert me!</clap-text> <clap-text at="30">You're an addict!</clap-text> <clap-text at="40">Son of a clapper!</clap-text> <clap-text at="50">No way</clap-text> <clap-text at="60">Go back to work!</clap-text> <clap-text at="70">This is getting out of <em>hand</em></clap-text> <clap-text at="80">Unbelievable</clap-text> <clap-text at="90">PREPOSTEROUS</clap-text> <clap-text at="100">I N S A N I T Y</clap-text> <clap-text at="185"><span style="font-family:monospace">FEED ME A STRAY CAT</span></clap-text> </clap-config> <template id="_animation-template"><div class="animation-main fixed-top"><nav id="breadcrumbs" class="screen-only"><ul></ul></nav><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template"><div class="loading nav-btn fr"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span></div></template> <template id="_error-template"><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_permalink-template"> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="content-hash"></span> </a> </template></div></html>
