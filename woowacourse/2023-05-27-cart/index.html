<!DOCTYPE html>
<html lang="ko"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v9.1.5 <https://hydejack.com/>
--><head><title>우테코 - 장바구니 미션 회고</title><meta name="description" content="장바구니 미션을 진행하면서 있었던 과정을 회고해보자 "><link rel="canonical" href="https://parkmuhyeun.github.io/woowacourse/2023-05-27-cart/"><meta name="keywords" content="spring,springboot,java,jpa"><meta name="theme-color" content="rgb(8,46,57)"><link rel="stylesheet" href="/assets/tipuesearch/css/tipuesearch.css"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <script src="/assets/tipuesearch/tipuesearch_content.js"></script> <script src="/assets/tipuesearch/tipuesearch_set.js"></script> <script src="/assets/tipuesearch/tipuesearch.min.js"></script><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="애송이 개발 블로그"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="application-name" content="애송이 개발 블로그"><meta name="generator" content="Hydejack v9.1.5" /><link rel="alternate" href="https://parkmuhyeun.github.io/woowacourse/2023-05-27-cart/" hreflang="ko-kr, en-us"><link type="application/atom+xml" rel="alternate" href="https://parkmuhyeun.github.io/feed.xml" title="애송이 개발 블로그" /><link rel="shortcut icon" href="/assets/icons/favicon.ico"><link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png"><link rel="manifest" href="/assets/site.webmanifest"><link rel="dns-prefetch" href="https://fonts.googleapis.com"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG"> <script>!function(r,c){"use strict";function a(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}r.loadJS=function(e,t){var n=c.createElement("script");n.src=e,t&&a(n,"load",t,{once:!0});t=c.scripts[0];return t.parentNode.insertBefore(n,t),n},r._loaded=!1,r.loadJSDeferred=function(e,t){var n=c.createElement("script");function o(){r._loaded=!0,t&&a(n,"load",t,{once:!0});var e=c.scripts[0];e.parentNode.insertBefore(n,e)}return n.src=e,r._loaded?o():a(r,"load",o,{once:!0}),n},r.setRel=r.setRelStylesheet=function(e){a(c.getElementById(e),"load",function(){this.rel="stylesheet"},{once:!0})}}(window,document); !function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this); !function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this); !function(w) { w._baseURL = '/'; w._publicPath = '/assets/js/'; w._noPushState = false; w._noDrawer = false; w._noNavbar = false; w._noToc = false; w._noSearch = false; w._search = { DATA_URL: '/assets/sitedata.json?no-cache', STORAGE_KEY: 'mini-search/', INDEX_KEY: 'index--2024-02-11T09:18:25+00:00', }; w._clapButton = false; }(window);</script> <script async src="/assets/bower_components/MathJax/es5/tex-mml-chtml.js" id="_MathJax"></script> <!--[if gt IE 8]><!----><style id="_styleInline"> .clearfix,.sidebar-social::after{content:"";display:table;clear:both}.color-transition,.content .avatar,.nav-btn,.nav-btn-bar,.navbar,.message,.note-sm,#markdown-toc,.note,.hr-bottom,.hr-after::after,hr,.hr,p,body{transition:none}html{--font-family: Noto Sans,Helvetica,Arial,sans-serif;--font-family-heading: Roboto Slab,Helvetica,Arial,sans-serif;--code-font-family: Fira Code,Menlo,Monaco,Consolas,monospace;--body-color: #333;--body-bg: #fff;--border-color: #ebebeb;--gray: #777;--gray-bg: rgba(0,0,0,0.025);--gray-text: #666;--menu-text: #bbb;--inv-body-color: #ccc;--inv-body-bg: #282828;--root-font-size: 15px;--root-font-size-medium: 16px;--root-font-size-large: 17px;--root-font-size-print: 8pt;--root-line-height: 1.75;--font-weight: 400;--font-weight-bold: 700;--font-weight-heading: 700;--content-width-5: 54rem;--content-margin-5: 4rem;--sidebar-width: 21rem;--half-content: 31rem;--break-point-3: 64em;--break-point-5: 86em;--break-point-dynamic: 1664px}html .content{-webkit-font-smoothing:initial;-moz-osx-font-smoothing:initial}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:var(--font-family);font-size:var(--root-font-size);line-height:var(--root-line-height)}body{color:var(--body-color);background-color:var(--body-bg);font-weight:var(--font-weight);overflow-y:scroll}.content img,.img,.content video,.video{max-width:100%;height:auto}.lead{margin-left:-1rem;margin-right:-1rem;margin-bottom:1.5rem}img.lead,video.lead{display:block;max-width:calc(100% + 2rem);width:calc(100% + 2rem);height:auto}.heading,.f6,h6,.h6,.f5,h5,.h5,.f4,.sidebar-nav-item,h4,.h4,.post-date,.f3,h3,.h3,.f2,h2,.h2,.f1,h1,.h1{font-family:var(--font-family-heading);font-weight:var(--font-weight-heading)}.f1,h1,.h1{font-size:2rem;line-height:1.3}.f2,h2,.h2{font-size:1.5rem;line-height:1.4}.f3,h3,.h3{font-size:1.2em;line-height:1.5}.f4,.sidebar-nav-item,h4,.h4,.post-date{font-size:1.08rem;line-height:1.6}.f5,h5,.h5{font-size:1.04rem;line-height:1.7}.f6,h6,.h6{font-size:1rem}.content h1>a,.content .h1>a{text-decoration:none;border-bottom:none}@media screen and (max-width: 42em){.content h1,.content .h1{font-size:1.7rem;line-height:1.35}}@media screen and (min-width: 86em){.content h1,.content .h1{font-size:2.4rem;line-height:1.25}}@media screen and (min-width: 1664px){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{width:calc(100% + 50vw - 32rem);font-size:3rem;line-height:1.2}}@media screen and (min-width: 124em){body:not(.no-large-headings) .content h1,body:not(.no-large-headings) .content .h1{font-size:4rem;line-height:1.1}}h1,h2,h3,.h1,.h2,.h3{margin:4rem 0 1rem}h4,h5,h6,.h4,.post-date,.h5,.h6{margin:3rem 0 .5rem}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.2em;margin-top:1.5rem;margin-bottom:1.5rem;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr,.hr{border:0;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-after::after{content:"";display:block;margin:1rem 0;border-top:1px solid var(--border-color)}.hr-bottom{border-bottom:1px solid var(--border-color);padding-bottom:.75rem;margin-bottom:1rem}.page{margin-bottom:3em}.page li+li{margin-top:.25rem}.page>header{position:relative;margin-bottom:1.5rem}@media screen and (min-width: 1664px){body:not(.no-third-column) .page>header>.lead+.note-sm,body:not(.no-third-column) .page>header>.lead+#markdown-toc,body:not(.no-third-column) .page>header>.lead+.note,body:not(.no-third-column) .page>header>a.no-hover+.note-sm,body:not(.no-third-column) .page>header>a.no-hover+#markdown-toc,body:not(.no-third-column) .page>header>a.no-hover+.note{position:absolute;right:-25rem;width:21rem;bottom:0;margin-bottom:0}}.page-title,.post-title{margin-top:0}.post-date{display:flex;justify-content:space-between;margin-top:-.6rem;height:2rem;margin-bottom:.85rem;color:var(--gray)}.post-date>.ellipsis,#breadcrumbs.post-date>ul{cursor:pointer}.post-date [class^="icon-"]{display:inline-block;font-size:smaller;margin-right:.25rem}.related-posts{padding-left:0;list-style:none;margin-bottom:2rem}.related-posts>li,.related-posts>li+li{margin-top:1rem}.message,.note-sm,#markdown-toc,.note{margin-bottom:1rem;padding:1rem;color:var(--gray-text);background-color:var(--gray-bg);margin-left:-1rem;margin-right:-1rem}.note-sm,#markdown-toc,.note{background:transparent;color:var(--body-color);font-size:smaller;border-left:1px solid var(--border-color);padding:1.2rem 1rem 0 1rem;margin:1rem -1rem;position:relative}.note-sm:before,#markdown-toc:before,.note:before{font-size:0.667rem;font-weight:bold;font-style:normal;letter-spacing:.025rem;text-transform:uppercase;color:var(--menu-text);position:absolute;top:0}.note-sm[title]:before,#markdown-toc[title]:before,.note[title]:before{content:attr(title) !important}.note{font-size:1rem}@media screen{body::before{content:'';width:.5rem;background:var(--gray-bg);position:fixed;left:0;top:0;bottom:0}}@media (min-width: 64em){body::before{width:21rem}}@media (min-width: 1664px){body::before{width:calc(50% - 31rem)}}@media screen and (min-width: 42em){html{font-size:var(--root-font-size-medium)}}@media screen and (min-width: 124em){html{font-size:var(--root-font-size-large)}}#breadcrumbs>ul{height:1rem;margin:-1.5rem 0 .5rem;padding:0;font-size:.667rem;color:var(--menu-text);text-transform:uppercase;width:100%;list-style:none}#breadcrumbs>ul>li{display:inline}#breadcrumbs>ul>li a{color:var(--gray);text-decoration:none;border-bottom:none}.fl{float:left}.fr{float:right}.mb4{margin-bottom:4rem}.mb6{margin-bottom:6rem}.mt0{margin-top:0}.mt1{margin-top:1rem}.mt2{margin-top:2rem}.mt3{margin-top:3rem}.mt4{margin-top:4rem}.pb0{padding-bottom:0}.ml1{margin-left:1rem}.mr1{margin-right:1rem}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}.sixteen-ten{position:relative}.sixteen-ten::before{display:block;content:"";width:100%;padding-top:62.5%}.sixteen-ten>*{position:absolute;top:0;left:0;right:0;bottom:0}.four-three{position:relative}.four-three::before{display:block;content:"";width:100%;padding-top:75%}.four-three>*{position:absolute;top:0;left:0;right:0;bottom:0}.sr-only{display:none}.larger{font-size:larger}.smaller{font-size:smaller}.clearfix,.sidebar-social::after{content:"";display:table;clear:both}.ellipsis,#breadcrumbs>ul{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.border{border:1px solid var(--border-color)}@media (min-width: 42em){.border-radius,.lead,.page .aspect-ratio.sixteen-nine.lead{border-radius:.5rem}}.fallback-img{background-position:center;background-repeat:no-repeat;background-image:url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjkwIiB2aWV3Qm94PSIwIDAgMTYwIDkwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxnIHRyYW5zZm9ybT0ibWF0cml4KDAuMDQ4ODI4LCAwLCAwLCAwLjA0Nzk5MSwgNTQuOTk5OTczLCAyMC40MjgxNDgpIj4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTk1OS44ODQgMTI4YzAuMDQwIDAuMDM0IDAuMDgyIDAuMDc2IDAuMTE2IDAuMTE2djc2Ny43N2MtMC4wMzQgMC4wNDAtMC4wNzYgMC4wODItMC4xMTYgMC4xMTZoLTg5NS43N2MtMC4wNDAtMC4wMzQtMC4wODItMC4wNzYtMC4xMTQtMC4xMTZ2LTc2Ny43NzJjMC4wMzQtMC4wNDAgMC4wNzYtMC4wODIgMC4xMTQtMC4xMTRoODk1Ljc3ek05NjAgNjRoLTg5NmMtMzUuMiAwLTY0IDI4LjgtNjQgNjR2NzY4YzAgMzUuMiAyOC44IDY0IDY0IDY0aDg5NmMzNS4yIDAgNjQtMjguOCA2NC02NHYtNzY4YzAtMzUuMi0yOC44LTY0LTY0LTY0djB6Ii8+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDpyZ2JhKDEyOCwxMjgsMTI4LC4zMykiIGQ9Ik04MzIgMjg4YzAgNTMuMDIwLTQyLjk4IDk2LTk2IDk2cy05Ni00Mi45OC05Ni05NiA0Mi45OC05NiA5Ni05NiA5NiA0Mi45OCA5NiA5NnoiLz4KICAgIDxwYXRoIHN0eWxlPSJmaWxsOnJnYmEoMTI4LDEyOCwxMjgsLjMzKSIgZD0iTTg5NiA4MzJoLTc2OHYtMTI4bDIyNC0zODQgMjU2IDMyMGg2NGwyMjQtMTkyeiIvPgogIDwvZz4KPC9zdmc+")}hy-push-state a{color:var(--body-color)}@supports not ((text-decoration-thickness: initial) and (text-underline-offset: initial)){hy-push-state a{text-decoration:none;border-bottom:2px solid}}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){hy-push-state a{text-decoration-style:solid;text-underline-offset:.35rem;text-decoration-thickness:2px}}hy-push-state a.no-hover{border-bottom:none;text-decoration-thickness:unset;text-underline-offset:unset}.content a:not(.btn):not(.no-hover){border-color:var(--accent-color-faded)}@supports (text-decoration-thickness: initial) and (text-underline-offset: initial){.content a:not(.btn):not(.no-hover){text-decoration-color:var(--accent-color-faded)}}.content .aspect-ratio{overflow:hidden}.content .aspect-ratio img{margin:0;width:100%;height:100%;background-color:var(--gray-bg)}hy-drawer{width:100%;position:relative;overflow:hidden;display:block;z-index:4}@media screen and (min-width: 64em){hy-drawer{position:fixed;width:21rem;top:0;left:0;bottom:0;margin-left:0}hy-drawer.cover{position:relative;width:100%}}@media screen and (min-width: 1664px){hy-drawer{width:calc(50% - 31rem)}}.sidebar{position:relative;display:flex;justify-content:center;align-items:center;color:rgba(255,255,255,0.75);text-align:center;min-height:100vh}.sidebar.invert{color:rgba(32,32,32,0.75)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2);text-decoration-color:rgba(255,255,255,0.2)}.sidebar.invert a{color:#222;border-bottom-color:rgba(32,32,32,0.2);text-decoration-color:rgba(32,32,32,0.2)}.sidebar-bg{position:absolute;top:0;left:calc(50% - 50vw);width:100vw;height:100%;background:#202020 center / cover}.sidebar-bg::after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,0.05)}.sidebar-bg.sidebar-overlay::after{background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 50%, rgba(32,32,32,0) 100%)}.sidebar-sticky{position:relative;z-index:3;max-width:21rem;padding:1.5rem;contain:content}.sidebar-about .avatar{margin-bottom:1.5rem}.sidebar-about>a.sidebar-title{text-decoration:none}.sidebar-about>a.sidebar-title>h2{margin:0;padding-bottom:.5rem}.sidebar-about>a.sidebar-title::after{content:'';display:block;border-bottom:2px solid;margin:0 auto .5rem;width:4rem;border-color:rgba(255,255,255,0.2);transition:border-color 250ms}.sidebar-about>a.sidebar-title:hover::after{border-color:#fff;transition:border-color 50ms}.sidebar.invert .sidebar-about>a.sidebar-title::after{border-color:rgba(32,32,32,0.2)}.sidebar.invert .sidebar-about>a.sidebar-title:hover::after{border-color:#222}.sidebar-nav>ul{list-style:none;padding-left:0}.sidebar-nav-item{display:inline-block;margin-bottom:.5rem}@media (min-width: 64em){#_main.no-drawer #_menu{display:none}#_main.no-drawer .nav-btn-bar>:nth-child(2){border:none}}.sidebar-social>ul{display:inline-block;list-style:none;padding-left:0;margin-bottom:0}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.4rem;width:3rem;height:4rem;padding:.5rem 0;line-height:3rem;text-decoration:none;border-bottom-width:2px;border-bottom-style:solid}.sidebar-social>ul li+li{margin-top:0}.fixed-common,.fixed-bottom,.fixed-top{position:fixed;left:0;width:100%;z-index:2}.fixed-top{top:0}.fixed-bottom{bottom:0}.navbar>.content{position:relative;padding-top:0;padding-bottom:0;min-height:0;max-height:5rem}.nav-btn-bar{margin:0 -1rem;background-color:white;background-color:var(--body-bg);height:5rem;display:flex;align-items:center;position:relative}.nav-btn-bar>:first-child,.nav-btn-bar>:last-child{border:none}.nav-btn{background:none;border:none;text-decoration:none;display:flex;align-items:center;justify-content:center;width:3.25rem;height:5rem;color:var(--menu-text);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color);margin-left:-1px}#markdown-toc{margin:2rem -1rem 2rem calc(-1rem + 1px);padding-left:2.5rem;padding-bottom:.5rem}#markdown-toc:before{left:1rem}@media screen and (min-width: 1664px){body:not(.no-toc) #markdown-toc{position:absolute;z-index:4;width:20.5rem;right:0;margin:auto;overflow:auto}}@media screen and (min-width: 1664px){body.no-break-layout:not(.no-toc) #markdown-toc{width:calc(50% - 31rem)}}.content{margin-left:auto;margin-right:auto;padding:8rem 1rem 12rem}@media screen{.content{padding-left:1.5rem;min-height:100vh}}@media screen and (min-width: 42em){.content{max-width:42rem}}@media screen and (min-width: 54em){.content{max-width:48rem}}@media screen and (min-width: 64em){.content{padding-left:1rem;margin-left:24rem;margin-right:3rem}}@media screen and (min-width: 86em){.content{padding-top:9rem;margin-left:25rem;margin-right:4rem;max-width:54rem}}@media screen and (min-width: 1664px){.content{margin:auto}}.large-only{display:none}@media screen and (min-width: 1664px){.large-only{display:block}}.avatar{width:7rem;height:7rem;border-radius:100%;overflow:hidden;display:inline-block}.avatar img{width:100%}.content .avatar{float:right;box-sizing:content-box;border:1rem solid var(--body-bg);transition:border-color 1s ease;margin-top:-1.5rem;margin-right:-1rem}.note:before{content:"Note"}.page>header>.note-sm:before,.page>header>.note:before,.page>header>#markdown-toc:before{content:"Description"}#markdown-toc:before{content:"Table of Contents"}.layout-resume .note-sm:before,.layout-resume .note:before,.layout-resume #markdown-toc:before{content:"Summary"}</style><link rel="preload" as="style" href="/assets/css/hydejack-9.1.5.css" id="_stylePreload"><link rel="preload" as="style" href="/assets/icomoon/style.css" id="_iconsPreload"><link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap" id="_fontsPreload"> <script> setRel('_stylePreload'); setRel('_iconsPreload'); /**/setRel('_fontsPreload');/**/ </script> <noscript><link rel="stylesheet" href="/assets/css/hydejack-9.1.5.css"><link rel="stylesheet" href="/assets/icomoon/style.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap"> </noscript><style id="_pageStyle"> html{--accent-color: rgb(79,177,186);--accent-color-faded: rgba(79,177,186,0.5);--accent-color-highlight: rgba(79,177,186,0.1);--accent-color-darkened: #409ba3;--theme-color: rgb(8,46,57)}</style><!--<![endif]--><body class="no-break-layout"> <hy-push-state id="_pushState" replace-selector="#_main" link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)" script-selector="script" duration="500" hashchange ><div id="_navbar" class="navbar fixed-top"><div class="content"> <span class="sr-only">Jump to:</span><div class="nav-btn-bar"> <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened"> <span class="sr-only">Navigation</span> <span class="icon-menu"></span> </a> <!--상단메뉴 카테고리들 --><div class="top-menu"> <a id="_drawer--opened" href="/about/" class="nav-btn top-menu " > About </a> <a href="/study/" class="nav-btn top-menu " > Study </a> <a href="/etc/" class="nav-btn top-menu " > Etc </a> <a href="/woowacourse/" class="nav-btn top-menu " > 우테코 5기 </a></div><div class="nav-span"> <form action="/search"><div class="tipue_search_left"> <img src="/assets/tipuesearch/search.png" class="tipue_search_icon"></div><div class="tipue_search_right"> <input type="text" name="q" id="tipue_search_input" placeholderpattern=".{1,}" title="At least 1 characters" required></div><div style="clear: both;"></div></form></div></div></div></div><hr class="sr-only" hidden /><main id="_main" class="content layout-post" role="main" ><nav id="breadcrumbs" class="screen-only"><ul><li><a href="/">home</a><li> <span>/</span> <a href="/woowacourse/">woowacourse</a><li> <span>/</span> <span>2023-05-27-cart</span></ul></nav><article id="post-woowacourse-cart" class="page post mb6" role="article"><header><h1 class="post-title flip-project-title"> 우테코 - 장바구니 미션 회고</h1><div class="post-date"> <span class="ellipsis mr1"> <time datetime="2023-05-27T00:00:00+00:00">27 May 2023</time> in <a href="/woowacourse/" class="flip-title">woowacourse</a> on <span>Woowacourse</span>, <span>Spring</span>, <span>Cart</span> </span></div><p class="note-sm" > 장바구니 미션을 진행하면서 있었던 과정을 회고해보자</header><p>그동안 너무 바빠서 미션 회고를 정말 오랜만에 쓴다.. 역시 한번 일을 미루면 계속 미루게 되는 거 같아 될 수 있으면 빨리빨리 끝내는 게 제일 좋은 것 같다. 늦은 만큼 빠르게 본문으로 가보자!<hr /><h2 id="save-후-어떤-걸-반환값으로-하는게-좋을까">Save 후 어떤 걸 반환값으로 하는게 좋을까?</h2><div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">public</span> <span class="nc">Long</span> <span class="nf">save</span><span class="o">(</span><span class="kd">final</span> <span class="nc">ProductEntity</span> <span class="n">productEntity</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">SqlParameterSource</span> <span class="n">parameterSource</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BeanPropertySqlParameterSource</span><span class="o">(</span><span class="n">productEntity</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">simpleJdbcInsert</span><span class="o">.</span><span class="na">executeAndReturnKey</span><span class="o">(</span><span class="n">parameterSource</span><span class="o">).</span><span class="na">longValue</span><span class="o">();</span>
    <span class="o">}</span>
</code></pre></div></div><p>데이터베이스에 단순히 저장만 하고 반환값으로 아무것도 안 줄 수도 있을 것이다. 실제로 처음에 이번 미션에서 딱히 저장하고 나서 반환한 값을 쓸 일이 없을 거 같아 void로 반환하였다. 하지만 테스트하는 과정에서 연관된 객체 간의 관계를 설정해 줄 때 반환값이 없는 경우 직접 찾아 넣어줘야 되거나 각 객체의 id를 1로 초기화시키는 쿼리를 넣어서 id를 예측해서 넣어줘야 되는 번거로움이 생겼다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">saveCart</span><span class="o">(){</span>
    <span class="c1">//반환값 없는 경우</span>
    <span class="n">productDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="nc">ProductEntity</span><span class="o">(</span><span class="s">"치킨"</span><span class="o">,</span> <span class="s">"testUrl"</span><span class="o">,</span> <span class="mi">20000</span><span class="o">));</span>
    <span class="n">memberDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="nc">MemberEntity</span><span class="o">(</span><span class="s">"testEmail"</span><span class="o">,</span> <span class="s">"testPassword"</span><span class="o">));</span>

    <span class="c1">//dao에서 저장한 객체를 찾거나 예측해서 id를 연관객체에 설정해줘야 됨</span>

    <span class="n">h2CartDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="nc">CartEntity</span><span class="o">(?,</span> <span class="o">?));</span>
  <span class="o">}</span>
</code></pre></div></div><p>위처럼 하는 경우 추가로 조회하는 불필요한 일이나 매 테스트마다 id를 초기화(여러 테스트가 있을 경우 rollback 해줘도 데이터는 초기화되지만 id 시작 값은 초기화되지 않음) 해서 넣어줘야 되기 때문에 id에 종속적이라 판단하였고 save 한 후 반환 값을 주는 게 좋을 것이라 생각하였다. 그리고 프로덕션 코드에서도 비즈니스 로직이 더 복잡해지면 이 저장한 값을 바탕으로 후에 객체 간의 관계 설정과 데이터 검색을 간편하게 수행할 수 있을 것 같다!<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">saveCart</span><span class="o">(){</span>
    <span class="kt">long</span> <span class="n">productId</span> <span class="o">=</span> <span class="n">productDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="nc">ProductEntity</span><span class="o">(</span><span class="s">"치킨"</span><span class="o">,</span> <span class="s">"testUrl"</span><span class="o">,</span> <span class="mi">20000</span><span class="o">));</span>
    <span class="kt">long</span> <span class="n">memberId</span> <span class="o">=</span> <span class="n">memberDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="nc">MemberEntity</span><span class="o">(</span><span class="s">"testEmail"</span><span class="o">,</span> <span class="s">"testPassword"</span><span class="o">));</span>

    <span class="n">h2CartDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="k">new</span> <span class="nc">CartEntity</span><span class="o">(</span><span class="n">productId</span><span class="o">,</span> <span class="n">memberId</span><span class="o">));</span>
  <span class="o">}</span>
</code></pre></div></div><p>그렇다면 반환 값으로 어떤 걸 주는 게 좋을까? id? 저장한 객체? 일반적으로는 객체의 고유 식별자인 id만 제공해서 관계 설정 및 업데이트를 위해 사용할 수 있을 것 같고 저장한 객체를 이용해서 추가적인 작업을 수행하는 경우에는 객체를 반환할 수 있을 것 같다.<h2 id="도메인부터-설계-데이터베이스부터-설계">도메인부터 설계? 데이터베이스부터 설계?</h2><p>예전부터 프로젝트를 할 때 DB부터 설계를 하고 들어가서 당연히 DB부터 설계를 해야 되는 줄 알았다. 하지만, <a href="https://parkmuhyeun.github.io/woowacourse/2023-04-29-Web-Racing-Car/#%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A4%91%EC%8B%AC-%EA%B4%80%EC%A0%90-%EC%84%A4%EA%B3%84">이전 미션</a>에서 데이터베이스 중심적으로 설계를 함으로 써 단점들을 체감을 했었기 때문에 최근에 이것에 대해 매우 고민이 많았다. DB에 굳이 저장할 필요 없는 필드들이 생성됨으로 써 코드를 짤 때 객체지향적이지 못한 코드들을 생성하게 되었다.<p>그래서 리뷰어님께 의견을 한번 구해봤다!<blockquote><p>어떤 순서로 설계하더라도 결국 구현하다보면 요구사항이 변동/추가되는 일도 생기고 설계할 때는 미처 파악하지 못했던 엣지케이스들도 나오기 때문에 결국 설계를 조금 수정하는 일이 생기기 마련이더라구요 😂</blockquote><blockquote><p>프로젝트 규모에 따라, 요구사항의 복잡도에 따라 그때그때 달라지긴 하지만 보통은 화면을 보며 필요한 API 리스트업을 하고 도메인 설계에 들어가는 편입니다 설계에는 정답이 없기 때문에 무민이 가장 편하고 자신있는 방법으로 진행해도 무방하다고 생각해요 :)</blockquote><p>어떻게 설계하든 정답은 없겠지만 나만의 기준이 필요할 것 같다. 우선 DB부터 설계하는 방식은 아무래도 데이터베이스 구조와 관계를 먼저 설계한 다음 거기에 맞춰 애플리케이션을 설계하는 것이므로 좀 더 성능 최적화에 맞춰져있지 않나 생각이 든다. 그래서 대규모 데이터베이스를 사용하는 시스템이나 성능이 중시되는 애플리케이션에 적합한 방식인 것 같다.<p>아직 현업을 경험해 보지 않아서 대규모니 성능이니 잘 모르겠지만 지금 우선해서 제일 중요하다고 생각하는 건 비즈니스 도메인과 요구사항이라고 생각하기 때문에 여기에 집중할 수 있는 도메인부터 설계하는게 현재로서는 최선이라고 생각한다. 그렇게 설계하고 나서 후에 성능이 개선할 필요가 있을 때 최적화를 하면 좋을 것 같다.<h2 id="올바른-오류-메시지">올바른 오류 메시지</h2><p>오류 메시지는 문제가 발생할 때 개발자가 사용자와 상호 작용하는 주요 방법이라 할 수 있다. 올바르게 작성된 오류 메시지는 사용자에게 어떤 문제점이 있는지, 어떻게 해결해야 하는지 중요한 정보를 제공하지만, 잘못된 오류 메시지는 오히려 사용자에게 혼란을 줄 수 있다. 잘못된 오류 메시지는 다음과 같다.<ul><li>실행 불가능<li>애매모호함<li>어떻게 해결해야 하는지 설명 없음</ul><h3 id="어떻게-오류-메시지를-작성하면-좋을까">어떻게 오류 메시지를 작성하면 좋을까?</h3><p>올바른 오류 메시지 작성을 위한 몇가지 방법들을 알아보자.<h3 id="조용히-실패하지-마라">조용히 실패하지 마라</h3><p>실패는 할 수 있다. 하지만 실패를 보고 하지 않는 것은 치명적이다. 왜 실패했는지 알리지 않으면 사용자들에게 올바른 정보를 전달할 수 없다. 사람들이 소프트웨어를 오용하는 걸 완전히 제거할 수는 없지만 최소화하려고 노력해야한다.<h3 id="오류의-원인-파악">오류의 원인 파악</h3><p>무엇이 잘못되었는지 사용자에게 구체적이고 정확하게 알려줘야 된다. 애매모호한 오류 메시지는 사용자에게 혼란을 줄 수 있다.<blockquote><p>❗ Not recommended<p>잘못된 디렉토리입니다.<p>👍 Recommended<p>지정된 디렉토리가 존재하지만 쓸 수 없습니다. 이 디렉토리에 파일을 추가하려면 디렉토리가 쓰기 가능해야 합니다. [이 디렉토리를 쓰기 가능하게 만드는 방법에 대한 설명.]</blockquote><h3 id="사용자의-유효하지-않은-입력">사용자의 유효하지 않은 입력</h3><p>사용자가 잘못된 입력을 할 경우 오류메시지는 잘못된 입력을 알려줘야 된다.<blockquote><p>❗ Not recommended<p>우편번호가 잘못되었습니다.<p>👍 Recommended<p>미국 우편 번호는 5자리 또는 9자리로 구성되어야 합니다. 지정된 우편 번호(4872953)에는 7자리 숫자가 포함되어 있습니다.</blockquote><h3 id="요구-사항-및-제약-조건-지정">요구 사항 및 제약 조건 지정</h3><p>사용자가 시스템의 한계를 알고 있지 않기 때문에 요구 사항과 제약 조건을 이해하도록 구체적으로 알려줘야 된다.<blockquote><p>❗ Not recommended<p>첨부파일의 크기가 너무 큽니다.<p>👍 Recommended<p>첨부파일의 총 크기(14MB)가 허용 한도(10MB)를 초과합니다. [가능한 솔루션에 대한 세부 정보.]</blockquote><h3 id="문제를-해결하는-방법-설명">문제를 해결하는 방법 설명</h3><p>실행 할 수 있는 오류 메시지를 만들어야 한다. 즉, 문제의 원인을 설명한 후 문제를 해결하는 방법을 설명해야한다.<blockquote><p>❗ Not recommended<p>장치의 클라이언트 앱은 더 이상 지원되지 않습니다.<p>👍 Recommended<p>장치의 클라이언트 앱은 더 이상 지원되지 않습니다. 클라이언트 앱을 업데이트하려면 앱 업데이트 버튼을 클릭합니다.</blockquote><h3 id="간결하게-작성하라">간결하게 작성하라</h3><p>불필요한 텍스트는 잘라내고 간결하고도 중요한 것을 작성해야한다.<blockquote><p>❗ Not recommended<p>리소스를 찾을 수 없으며 구분할 수 없습니다. 선택한 항목이 클러스터에 없습니다. [클러스터에서 유효한 리소스를 찾는 방법에 대한 설명]<p>👍 Recommended <이름> 리소스가 <이름> 클러스터에 없습니다. [클러스터에서 유효한 리소스를 찾는 방법에 대한 설명] </이름></이름></blockquote><h3 id="이중-부정을-피하라">이중 부정을 피하라</h3><p>이중 부정은 말의 뜻을 어렵게 만들기 때문에 피하는게 좋다.<blockquote><p>❗ Not recommended<p>경로 이름 에 대한 범용 읽기 권한은 운영 체제가 액세스를 금지하는 것을 방지합니다.<p>👍 Recommended<p>경로 이름 에 대한 범용 읽기 권한이 있으면 누구나 이 파일을 읽을 수 있습니다. 모든 사람에게 액세스 권한을 부여하는 것은 보안 결함입니다. 독자를 제한하는 방법에 대한 자세한 내용은 하이퍼링크를 참조하십시오.</blockquote><h3 id="대상자를-고려하라">대상자를 고려하라</h3><p>해당 오류 메시지를 읽는 사람은 개발자가 아닐 확률이 더 높다. 나에게 친숙한 용어가 대상 청중들은 익숙하지 않을 수 있기 때문에 대상자를 고려하자<blockquote><p>❗ Not recommended<p>서버 CPU 용량의 92%에서 실행 중이기 때문에 서버에서 클라이언트의 요청을 삭제했습니다. 5분 후에 다시 시도하십시오.<p>👍 Recommended<p>지금 너무 많은 사람들이 쇼핑하고 있어서 Google 시스템에서 구매를 완료할 수 없습니다. 5분 후에 다시 시도하십시오.</blockquote><h3 id="일관된-용어를-사용해라">일관된 용어를 사용해라</h3><p>하나의 오류메시지에서 무언가의 이름을 지정했으면 다른 모든 오류 메시지에도 일관되게 용어를 사용하자<blockquote><p>❗ Not recommended<p>127.0.0.1:56에서 클러스터에 연결할 수 없습니다. minikube가 실행 중인지 확인합니다.<p>👍 Recommended<p>127.0.0.1:56에서 minikube에 연결할 수 없습니다. minikube가 실행 중인지 확인합니다.</blockquote><h3 id="올바른-어조를-사용해라">올바른 어조를 사용해라</h3><p>오류 메시지의 어조는 사용자가 메시지를 해석하는 방식에 상당한 영향을 미치기 때문에 다음과 같은 올바른 어조를 사용하자.<h4 id="1-긍정적">1. 긍정적</h4><p>사용자가 무엇을 잘못했는지 알려주는 대신, 바로잡는 방법을 알려주자<blockquote><p>❗ Not recommended<p>이름을 입력하지 않았습니다<p>👍 Recommended<p>이름을 입력하세요.</blockquote><h4 id="2-오버해서-사과하지말자">2. 오버해서 사과하지말자</h4><p>“미안”, “제발”이라는 말은 피하고 문제와 솔루션을 명확하게 설명하는데 집중하자.<blockquote><p>❗ Not recommended<p>죄송합니다. 서버 오류가 발생하여 일시적으로 스프레드시트를 로드할 수 없습니다. 불편을 끼쳐드려 죄송합니다. 잠시 기다린 후 다시 시도하십시오.<p>👍 Recommended<p>Google 문서도구에서 일시적으로 스프레드시트를 열 수 없습니다. 그동안 문서 목록에서 스프레드시트를 마우스 오른쪽 버튼으로 클릭하여 다운로드해 보세요.</blockquote><h4 id="3-유머를-피하자">3. 유머를 피하자</h4><p>오류 메시지에서 유머는 사용자를 화나게하거나 잘못 해석할 수 있도록 하여 원래 오류 메시지의 목적을 손상시킬 수 있다.<blockquote><p>❗ Not recommended<p>서버가 실행 중인가요? 가서 잡아야 겠네요 :D. (Is the server running? Better go catch it :D.)<p>👍 Recommended<p>일시적으로 서버를 사용할 수 없습니다. 몇 분 후에 다시 시도하십시오.</blockquote><h4 id="4-사용자를-비난하지-마라">4. 사용자를 비난하지 마라</h4><p>비난보다는 무엇이 잘못되었는지에 대해 초점을 맞추자<blockquote><p>❗ Not recommended<p>오프라인 상태인 프린터를 지정했습니다.<p>👍 Recommended<p>지정된 프린터가 오프라인입니다.</blockquote><h2 id="usingrecursivecomparison">usingRecursiveComparison()</h2><p>테스트코드를 작성할 때 해당 객체들의 동등성(내부 값)을 비교하는 경우가 많다. 그럴 때 마다 equals를 재정의 해줄 수도 있겠지만 usingRecursiveComparsion()을 사용하면 좀 더 편리하게 비교할 수 있다. 그리고 특정 값을 제외하고 비교할 수 있는 기능도 지원해준다.<p>기본적인 사용법은 아래와 같고 직접 Comparator를 정의하고 싶은 경우 usingComparator()를 사용하면 된다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">testEqual</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">actualObject</span><span class="o">)</span>
            <span class="o">.</span><span class="na">usingRecursiveComparison</span><span class="o">()</span>
            <span class="c1">// .ignoringFields("id")</span>
            <span class="c1">// .ignoringActualNullFields()</span>
            <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">expectedObject</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div><ul><li>특정 필드값 제외 비교 - ignoringFields()<li>null값 제외하고 비교 - ignoringActualNullFields()</ul><h2 id="argumentresolver-테스트">Argumentresolver 테스트</h2><p>이번에 장바구니 미션에서 인증을 하기 위해 사용한 ArgumentResolver를 테스트 해보기위해선 resolveArgument의 파라미터인 MethodParameter, ModelAndViewContainer, NativeWebRequest, WebDataBinderFactory들을 모킹하거나 적절하게 넣어줘야 되는데 어찌 되었든 매우 테스트하기 어려웠다.<p>그래서 다음과 같이 통합 테스트로 인증을 넣은 경우와 안 넣은 경우를 추가로 테스트했었다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">findCartItems</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="n">given</span><span class="o">(</span><span class="n">productService</span><span class="o">.</span><span class="na">findById</span><span class="o">(</span><span class="n">any</span><span class="o">())).</span><span class="na">willReturn</span><span class="o">(</span><span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">CartItemResponse</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ProductEntity</span><span class="o">(</span><span class="mi">1L</span><span class="o">,</span> <span class="s">"치킨"</span><span class="o">,</span> <span class="s">"chicken"</span><span class="o">,</span> <span class="mi">10000</span><span class="o">)),</span>
            <span class="k">new</span> <span class="nf">CartItemResponse</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ProductEntity</span><span class="o">(</span><span class="mi">2L</span><span class="o">,</span> <span class="s">"피자"</span><span class="o">,</span> <span class="s">"pizza"</span><span class="o">,</span> <span class="mi">20000</span><span class="o">))));</span>

    <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/carts"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="no">AUTHORIZATION</span><span class="o">,</span> <span class="no">BASIC_TYPE</span> <span class="o">+</span> <span class="nc">Base64Coder</span><span class="o">.</span><span class="na">encodeString</span><span class="o">(</span><span class="no">EMAIL</span> <span class="o">+</span> <span class="no">DELIMITER</span> <span class="o">+</span> <span class="no">PASSWORD</span><span class="o">)))</span>
        <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
        <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$.size()"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">noAuthentication</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="n">given</span><span class="o">(</span><span class="n">memberDao</span><span class="o">.</span><span class="na">findByMemberEntity</span><span class="o">(</span><span class="n">any</span><span class="o">())).</span><span class="na">willReturn</span><span class="o">(</span>
        <span class="nc">Optional</span><span class="o">.</span><span class="na">empty</span><span class="o">());</span>

    <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/carts"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="no">AUTHORIZATION</span><span class="o">,</span> <span class="no">BASIC_TYPE</span> <span class="o">+</span> <span class="nc">Base64Coder</span><span class="o">.</span><span class="na">encodeString</span><span class="o">(</span><span class="no">EMAIL</span> <span class="o">+</span> <span class="no">DELIMITER</span> <span class="o">+</span> <span class="no">INVALID_PASSWORD</span><span class="o">)))</span>
        <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isUnauthorized</span><span class="o">());</span>
  <span class="o">}</span>
</code></pre></div></div><p>하지만 ArgumentResolver를 구성하는 핵심 로직만 따로 분리해서 테스트했다면 좀 더 쉽고 적절하게 테스트할 수 있었을 거 같다. 다음에는 테스트하기 어려운 경우 좀 더 작게 나눠볼 생각을 해야겠다!<h2 id="dao-단위-테스트를-순수하게">dao 단위 테스트를 순수하게?</h2><p>dao에서 어느 메서드를 테스트할 때 다른 메서드를 사용하게 되면 순수하게 그 메서드를 테스트하는 게 아니라고 생각했다. 그래서 하나의 메서드만 순수하게 테스트하기 위해 아래와 같이 jdbcTemplate으로 쿼리를 날렸다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//when</span>
        <span class="n">h2ProductDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">productEntity</span><span class="o">);</span>

        <span class="c1">//then</span>
        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ProductEntity</span><span class="o">&gt;</span> <span class="n">productEntities</span> <span class="o">=</span> <span class="n">getProducts</span><span class="o">();</span>
        <span class="kd">final</span> <span class="nc">ProductEntity</span> <span class="n">actual</span> <span class="o">=</span> <span class="n">productEntities</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

        <span class="c1">//then</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">productEntities</span><span class="o">).</span><span class="na">hasSize</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">actual</span><span class="o">)</span>
            <span class="o">.</span><span class="na">usingRecursiveComparison</span><span class="o">()</span>
            <span class="o">.</span><span class="na">ignoringFields</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">productEntity</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ProductEntity</span><span class="o">&gt;</span> <span class="nf">getProducts</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"select * from product"</span><span class="o">;</span>
        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ProductEntity</span><span class="o">&gt;</span> <span class="n">productEntities</span> <span class="o">=</span> <span class="n">namedParameterjdbcTemplate</span><span class="o">.</span><span class="na">getJdbcOperations</span><span class="o">().</span><span class="na">query</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="o">(</span><span class="n">resultSet</span><span class="o">,</span> <span class="n">count</span><span class="o">)</span> <span class="o">-&gt;</span>
                <span class="k">new</span> <span class="nf">ProductEntity</span><span class="o">(</span>
                        <span class="n">resultSet</span><span class="o">.</span><span class="na">getLong</span><span class="o">(</span><span class="s">"id"</span><span class="o">),</span>
                        <span class="n">resultSet</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"name"</span><span class="o">),</span>
                        <span class="n">resultSet</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"image_url"</span><span class="o">),</span>
                        <span class="n">resultSet</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"price"</span><span class="o">)</span>
                <span class="o">));</span>
        <span class="k">return</span> <span class="n">productEntities</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre></div></div><p>그런데 위 경우에는 간단해서 괜찮은데 나중에 저장해야 하는 연관 객체가 많아질 경우 쿼리도 무수하게 많아질 텐데 그 비용을 감수해서라도 순수하게 쿼리를 날리는 게 맞는 걸까라는 의문이 들었다. 그렇게 고민하던 중 문뜩 “다른 메서드를 사용하는 것을 생각하기 전에 우선 지금 @JdbcTest를 이용해 실제 데이터베이스에 접근해 테스트하는 게 단위 테스트가 맞나?”라는 생각이 들었다.<p>단위 테스트보단 통합 테스트에 가까운 거 같아서 다른 메서드를 통해 테스트해도 충분할 것 같다.<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">save</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//when</span>
        <span class="n">h2ProductDao</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">productEntity</span><span class="o">);</span>

        <span class="c1">//then</span>
        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ProductEntity</span><span class="o">&gt;</span> <span class="n">productEntities</span> <span class="o">=</span> <span class="n">h2ProductDao</span><span class="o">.</span><span class="na">findAll</span><span class="o">();</span>
        <span class="kd">final</span> <span class="nc">ProductEntity</span> <span class="n">actual</span> <span class="o">=</span> <span class="n">productEntities</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

        <span class="n">assertThat</span><span class="o">(</span><span class="n">productEntities</span><span class="o">).</span><span class="na">hasSize</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">actual</span><span class="o">)</span>
            <span class="o">.</span><span class="na">usingRecursiveComparison</span><span class="o">()</span>
            <span class="o">.</span><span class="na">ignoringFields</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="n">productEntity</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div><p>만약에 단위 테스트로 진행하고 싶다면 jdbcTemplate을 mock 해서 안의 로직들이 제대로 실행된 지 verify를 통해 확인할 수 있을 것 같다.<hr /><p>+리뷰어님께 받은 코드 리뷰에 대해 관심이 있으면 다음 PR들을 참고!<ul><li><a href="https://github.com/woowacourse/jwp-shopping-cart/pull/225">1단계 - 상품 관리 기능</a><li><a href="https://github.com/woowacourse/jwp-shopping-cart/pull/279">2단계 - 장바구니 기능</a></ul><hr /><p>참고:<ul><li><a href="https://developers.google.com/tech-writing/error-messages">https://developers.google.com/tech-writing/error-messages#learning_objectives</a></ul><p>*틀린 부분이 있으면 언제든지 말씀해 주시면 공부해서 수정하겠습니다.</article><hr class="dingbat related mb6" /> <script async src="https://www.googletagmanager.com/gtag/js?id=G-T765T1JLEW"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-T765T1JLEW'); </script><aside class="about related mt4 mb4" role="complementary"><div class="author mt4"><h2 class="page-title hr-bottom"> About</h2><p>반갑습니다. 백엔드 개발자 박무현입니다.<div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/parkmuhyeun" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:pjhg410@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://parkmuhyeun.github.io/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></aside><aside class="related mb4" role="complementary"><h2 class="hr-bottom">Related Posts</h2><ul class="related-posts"><li class="h4"> <a href="/study/it%20infra/2024-02-11-docker/" class="flip-title"><span>도커를 응용하기 위한 작동 원리 및 베이스들</span></a> <time class="faded fine" datetime="2024-02-11T00:00:00+00:00">11 Feb 2024</time><li class="h4"> <a href="/etc/seminar/2023-12-28-observability/" class="flip-title"><span>수백 개의 분산 서비스에서 Observability 시스템 구축하기</span></a> <time class="faded fine" datetime="2023-12-28T00:00:00+00:00">28 Dec 2023</time><li class="h4"> <a href="/etc/java/2023-12-16-Domain/" class="flip-title"><span>도메인 완전성과 순수성(+도메인 모델과 영속 모델 분리)</span></a> <time class="faded fine" datetime="2023-12-16T00:00:00+00:00">16 Dec 2023</time></ul></aside><aside class="comments related" role="complementary"><h2>Comments</h2><script src="https://utteranc.es/client.js" repo="parkmuhyeun/blog-comments-repo" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></aside><footer class="content" role="contentinfo"><hr/><p><small class="copyright">© 2022. All rights reserved. </small><p><small>Powered by 애송이</small><hr class="sr-only"/></footer></main><hy-drawer id="_drawer" class="" side="left" threshold="10" noscroll ><header id="_sidebar" class="sidebar" role="banner"><div class="sidebar-bg sidebar-overlay" style="background-color:rgb(8,46,57);background-image:url(/assets/img/sidebar-bg.jpg)"></div><div class="sidebar-sticky"><div class="sidebar-about"><div class="sidebar-title" style="margin-bottom: 45px;"> <a class="sidebar-title" href="/"><h2 class="h1">애송이 개발 블로그</h2></a></div><a class="no-hover" href="/" tabindex="-1"> <img src="/assets/img/logo.jpg" class="avatar" alt="애송이 개발 블로그" width="120" height="120" loading="lazy" /> </a><p class=""> 끊임없이 생각하고 나아가는 개발자</div><nav class="sidebar-nav heading" role="navigation"> <span class="sr-only">Navigation:</span><ul><li> <a id="_drawer--opened" href="/about/" class="sidebar-nav-item " > About </a><li> <a href="/study/" class="sidebar-nav-item " > Study </a><li> <a href="/etc/" class="sidebar-nav-item " > Etc </a><li> <a href="/woowacourse/" class="sidebar-nav-item " > 우테코 5기 </a></ul></nav><div class="sidebar-social"> <span class="sr-only">Social:</span><ul><li> <a href="https://github.com/parkmuhyeun" title="GitHub" class="no-mark-external"> <span class="icon-github"></span> <span class="sr-only">GitHub</span> </a><li> <a href="mailto:pjhg410@gmail.com" title="Email" class="no-mark-external"> <span class="icon-mail"></span> <span class="sr-only">Email</span> </a><li> <a href="https://parkmuhyeun.github.io/feed.xml" title="RSS" class="no-mark-external"> <span class="icon-rss2"></span> <span class="sr-only">RSS</span> </a></ul></div></div></header></hy-drawer><hr class="sr-only" hidden /> </hy-push-state> <!--[if gt IE 10]><!----> <script nomodule>!function(){var t,n=document.createElement("script");!("noModule"in n)&&"onbeforeload"in n&&(t=!1,document.addEventListener("beforeload",function(e){if(e.target===n)t=!0;else if(!e.target.hasAttribute("nomodule")||!t)return;e.preventDefault()},!0),n.type="module",n.src=".",document.head.appendChild(n),n.remove())}(); </script> <script src="/assets/js/hydejack-9.1.5.js" type="module"></script> <script src="/assets/js/LEGACY-hydejack-9.1.5.js" nomodule defer></script> <script>!function(w, d) { w.ga=w.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; /**/ ga('create', 'G-T765T1JLEW', 'auto'); /**/ var pushStateEl = d.getElementById('_pushState'); var timeoutId; pushStateEl.addEventListener('hy-push-state-load', function() { w.clearTimeout(timeoutId); timeoutId = w.setTimeout(function() { ga('set', 'page', w.location.pathname); ga('send', 'pageview'); }, 500); }); d.addEventListener('hy--cookies-ok', function () { w.ga(function(tracker) { w.ga("set", "anonymizeIp", undefined); localStorage && localStorage.setItem("ga--client-id", tracker.get("clientId")); }); }); w.loadJSDeferred('https://www.google-analytics.com/analytics.js'); }(window, document);</script> <!--<![endif]--><div hidden><h2 class="sr-only">Templates (for web app):</h2><clap-config> <clap-text at="1">Keep going!</clap-text> <clap-text at="2">Keep going ×2!</clap-text> <clap-text at="3">Give me more!</clap-text> <clap-text at="5">Thank you, thank you</clap-text> <clap-text at="7">Far too kind!</clap-text> <clap-text at="10">Never gonna give me up?</clap-text> <clap-text at="14">Never gonna let me down?</clap-text> <clap-text at="20">Turn around and desert me!</clap-text> <clap-text at="30">You're an addict!</clap-text> <clap-text at="40">Son of a clapper!</clap-text> <clap-text at="50">No way</clap-text> <clap-text at="60">Go back to work!</clap-text> <clap-text at="70">This is getting out of <em>hand</em></clap-text> <clap-text at="80">Unbelievable</clap-text> <clap-text at="90">PREPOSTEROUS</clap-text> <clap-text at="100">I N S A N I T Y</clap-text> <clap-text at="185"><span style="font-family:monospace">FEED ME A STRAY CAT</span></clap-text> </clap-config> <template id="_animation-template"><div class="animation-main fixed-top"><nav id="breadcrumbs" class="screen-only"><ul></ul></nav><div class="content"><div class="page"></div></div></div></template> <template id="_loading-template"><div class="loading nav-btn fr"> <span class="sr-only">Loading…</span> <span class="icon-cog"></span></div></template> <template id="_error-template"><div class="page"><h1 class="page-title">Error</h1><p class="lead"> Sorry, an error occurred while loading <a class="this-link" href=""></a>.</div></template> <template id="_permalink-template"> <a href="#" class="permalink"> <span class="sr-only">Permalink</span> <span class="content-hash"></span> </a> </template></div></html>
